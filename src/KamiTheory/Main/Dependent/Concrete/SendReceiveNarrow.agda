
module KamiTheory.Main.Dependent.Concrete.SendReceiveNarrow where

open import Agora.Conventions
open import Agora.Order.Preorder
open import KamiTheory.Main.Generic.ModeSystem.Definition

------------------------------------------------------------------------
-- We instantiate our generic type theory with the mode system
-- which we present for version 1 of the dependent Kami language.
--

module _ (P : Preorder ð‘–) where

  private variable
    U V : âŸ¨ P âŸ©

  ---------------------------------------------
  -- modes

  -- modes are "copies" of MLTT inside our type theory
  data Mode : Set where
    â–² : Mode -- the local mode
    â—¯ : Mode -- the global mode

  ---------------------------------------------
  -- mode homomorphisms (modalities)

  -- modalities are morphisms between modes,
  -- they are generated by the following two
  -- base mode homs.
  data BaseModeHom : (m n : Mode) -> ð’° (ð‘– âŒ„ 0) where
    `ï¼ ` : âˆ€(U : âŸ¨ P âŸ©) -> BaseModeHom â–² â—¯
    `[]` : BaseModeHom â—¯ â–²

  ---------------------------------------------
  -- mode transformations

  data BaseModeTrans : {m n : Mode} (Î¼s Î·s : Path BaseModeHom m n) -> Visibility -> ð’° ð‘– where
    narrow : U â‰¤ V -> BaseModeTrans (`ï¼ ` U â¨¾ id) (`ï¼ ` V â¨¾ id) invis
    send : âˆ€ U -> BaseModeTrans id (`ï¼ ` U â¨¾ `[]` â¨¾ id) vis
    recv : âˆ€ U -> BaseModeTrans (`[]` â¨¾ `ï¼ ` U â¨¾ id) id vis

  SRN : 2Graph _
  SRN = record
    { Point = Mode
    ; Edge = BaseModeHom
    ; Face = BaseModeTrans
    }



